{"version":3,"sources":["../../src/js/util.js"],"names":["Util","$","transition","MAX_UID","toType","bindType","end","delegateType","handle","event","target","is","handleObj","handler","apply","arguments","undefined","getSpecialTransitionEndEvent","transitionEndTest","window","QUnit","transitionEndEmulator","duration","called","one","TRANSITION_END","setTimeout","triggerTransitionEnd","setTransitionEndSupport","fn","emulateTransitionEnd","supportsTransitionEnd","special","getUID","prefix","Math","random","document","getElementById","getSelectorFromElement","element","selector","getAttribute","$selector","find","length","err","reflow","offsetHeight","trigger","Boolean","isElement","obj","nodeType","typeCheckConfig","componentName","config","configTypes","property","Object","prototype","hasOwnProperty","call","expectedTypes","value","valueType","RegExp","test","Error","toUpperCase"],"mappings":"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","file":"util.js","sourcesContent":["import $ from 'jquery';\n\n\nconst Util = (($) => {\n    let transition = false;\n\n    const MAX_UID = 1000000;\n\n    function toType() {\n        return {\n            bindType: transition.end,\n            delegateType: transition.end,\n            handle(event) {\n                if ($(event.target).is(this)) {\n                    return event.handleObj.handler.apply(this, arguments);\n                }\n                return undefined;\n            }\n        }\n    }\n\n    function getSpecialTransitionEndEvent() {\n        return {\n            bindType: transition.end,\n            delegateType: transition.end,\n            handle(event) {\n                if ($(event.target).is(this)) {\n                    return event.handleObj.handler.apply(this, arguments);\n                }\n                return undefined;\n            }\n        }\n    }\n\n    function transitionEndTest() {\n        if (typeof window !== 'undefined' && window.QUnit) {\n            return false;\n        }\n\n        return {\n            end: 'transitionend'\n        };\n    }\n\n    function transitionEndEmulator(duration) {\n        let called = false;\n\n        $(this).one(Util.TRANSITION_END, () => {\n            called = true;\n        });\n\n        setTimeout(() => {\n            if (!called) {\n                Util.triggerTransitionEnd(this);\n            }\n        }, duration);\n\n        return this;\n    }\n\n    function setTransitionEndSupport() {\n        transition = transitionEndTest();\n\n        $.fn.emulateTransitionEnd = transitionEndEmulator;\n\n        if (Util.supportsTransitionEnd()) {\n            $.event.special[Util.TRANSITION_END] = getSpecialTransitionEndEvent();\n        }\n    }\n\n    const Util = {\n\n        TRANSITION_END: 'tuiTransitionEnd',\n\n        getUID(prefix) {\n            do {\n                prefix += ~~(Math.random() * MAX_UID);\n            } while (document.getElementById(prefix));\n            return prefix;\n        },\n\n        getSelectorFromElement(element) {\n            let selector = element.getAttribute('data-target');\n            if (!selector || selector === '#') {\n                selector = element.getAttribute('href') || '';\n            }\n\n            try {\n                const $selector = $(document).find(selector);\n                return $selector.length > 0 ? selector : null;\n            } catch (err) {\n                return null;\n            }\n        },\n\n        reflow(element) {\n            return element.offsetHeight;\n        },\n\n        triggerTransitionEnd(element) {\n            $(element).trigger(transition.end);\n        },\n\n        supportsTransitionEnd() {\n            return Boolean(transition);\n        },\n\n        isElement(obj) {\n            return (obj[0] || obj).nodeType;\n        },\n\n        typeCheckConfig(componentName, config, configTypes) {\n            for (const property in configTypes) {\n                if (Object.prototype.hasOwnProperty.call(configTypes, property)) {\n                    const expectedTypes = configTypes[property];\n                    const value         = config[property];\n                    const valueType     = value && Util.isElement(value)\n                        ? 'element' : toType(value);\n\n                    if (!new RegExp(expectedTypes).test(valueType)) {\n                        throw new Error(\n                            `${componentName.toUpperCase()}: ` +\n                            `Option \"${property}\" provided type \"${valueType}\" ` +\n                            `but expected type \"${expectedTypes}\".`);\n                    }\n                }\n            }\n        }\n    }\n\n    setTransitionEndSupport();\n\n    return Util;\n})($);\n\nexport default Util;\n"]}