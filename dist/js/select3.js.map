{"version":3,"sources":["../../src/js/select3.js"],"names":["Select3","$","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","fn","Default","placeholder","search","DefaultType","Event","CLICK_SHOW","CLICK_DISMISS","ClassName","BACKDROP","CONTAINER_ACTIVE","POPOUT","CONTAINER","Selector","DATA_TOGGLE","element","config","_config","_getConfig","_element","_isShown","_allowClear","toggle","$element","addClass","html","parent","prepend","that","$container","_getContainer","on","show","hide","_drawBackdrop","$backdrop","$popout","_drawPopout","toggleClass","css","outerWidth","offset","top","outerHeight","left","find","focus","dispose","length","append","removeClass","Util","typeCheckConfig","_jQueryInterface","each","data","TypeError","document","ready","$target","call","Constructor","noConflict"],"mappings":"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","file":"select3.js","sourcesContent":["import $ from 'jquery';\nimport Util from './util';\n\nconst Select3 = (($) => {\n    const NAME                = 'select3';\n    const VERSION             = '4.0.0';\n    const DATA_KEY            = 'tui.select3';\n    const EVENT_KEY           = `.${DATA_KEY}`;\n    const DATA_API_KEY        = '.data-api';\n    const JQUERY_NO_CONFLICT  = $.fn[NAME];\n\n\n    const Default = {\n        placeholder: '',\n        search: true,\n    };\n\n    const DefaultType = {\n        placeholder: 'string',\n        search: 'boolean'\n    };\n\n    const Event = {\n        // HIDE              : `hide${EVENT_KEY}`,\n        // HIDDEN            : `hidden${EVENT_KEY}`,\n        // SHOW              : `show${EVENT_KEY}`,\n        CLICK_SHOW              : `click.show${EVENT_KEY}`,\n        // SHOWN             : `shown${EVENT_KEY}`,\n        // LOADED            : `loaded${EVENT_KEY}`,\n        // FOCUSIN           : `focusin${EVENT_KEY}`,\n        // RESIZE            : `resize${EVENT_KEY}`,\n        CLICK_DISMISS           : `click.dismiss${EVENT_KEY}`,\n        // KEYDOWN_DISMISS   : `keydown.dismiss${EVENT_KEY}`,\n        // MOUSEUP_DISMISS   : `mouseup.dismiss${EVENT_KEY}`,\n        // MOUSEDOWN_DISMISS : `mousedown.dismiss${EVENT_KEY}`,\n        // CLICK_DATA_API    : `click${EVENT_KEY}${DATA_API_KEY}`\n    };\n\n    const ClassName = {\n        BACKDROP                : 'tui-select-backdrop',\n        CONTAINER_ACTIVE        : 'tui-select-container-active',\n        POPOUT                  : 'tui-select-popout',\n        CONTAINER               : 'tui-select-container',\n        // SCROLLBAR_MEASURER : 'layer-scrollbar-measure',\n        // BACKDROP           : 'layer-backdrop',\n        // FADE               : 'fade',\n        // SHOW               : 'show',\n        // LAYER              : 'layer-inner'\n    };\n\n    const Selector = {\n        DATA_TOGGLE         : '[data-toggle=\"tui-select\"]',\n    };\n\n\n\n    class Select3 {\n        constructor(element, config) {\n            this._config              = this._getConfig(config);\n            this._element             = element;\n            this._isShown             = false;\n            this._allowClear          = !!this._config.placeholder;\n        }\n\n        // Public\n\n        toggle() {\n            // 绘制\n            let $element = $(this._element);\n            $element.addClass('d-none');\n            let html = '';\n            html += '<div class=\"tui-select-container\">';\n            html += '<a href=\"javascript:void(0);\" class=\"tui-select-choice\" tabindex=\"-1\">';\n            html += '<span>&nbsp;</span>';\n            if (this._allowClear) {\n                html += '<abbr class=\"tui-select-search-choice-close\" style=\"\">×</abbr>';\n            }\n            html += '</a>';\n            html += '</div>';\n\n            $element.parent().prepend(html);\n\n            const that = this;\n            const $container = this._getContainer();\n            $container.on(`${Event.CLICK_SHOW}`, function () {\n                if (!that._isShown) {\n                    that.show();\n                } else {\n                    that.hide();\n                }\n            });\n\n            this._drawBackdrop();\n        }\n\n        show() {\n            if (this._isShown) {\n                return;\n            }\n            const that = this;\n            let $backdrop = this._drawBackdrop();\n            $backdrop.on(`${Event.CLICK_DISMISS}`, function () {\n                that.hide();\n            });\n\n            let $popout = this._drawPopout();\n\n            this._isShown = true;\n            $backdrop.toggleClass('d-none');\n            $popout.toggleClass('d-none');\n\n            let $container = this._getContainer();\n            $container.toggleClass(`${ClassName.CONTAINER_ACTIVE}`);\n\n            $popout.css({\n                'width': $container.outerWidth() + 'px',\n                'top': $container.offset().top + $container.outerHeight() + 'px',\n                'left': $container.offset().left + 'px',\n                'margin': 0,\n                'margin-top': '1px',\n            });\n            $('.tui-select-search', $popout).find('.tui-input').focus();\n        }\n\n\n        hide() {\n            if (!this._isShown) {\n                return;\n            }\n\n            let $popout = this._drawPopout();\n            let $backdrop = this._drawBackdrop();\n\n            this._isShown = false;\n            $backdrop.toggleClass('d-none');\n            $popout.toggleClass('d-none');\n\n            let $container = this._getContainer();\n            $container.toggleClass(`${ClassName.CONTAINER_ACTIVE}`);\n\n        }\n\n        dispose() {\n\n        }\n\n        // Private\n\n        _getContainer() {\n            let $element = $(this._element);\n            return $element.parent().find(`.${ClassName.CONTAINER}`);\n        }\n\n        _drawPopout() {\n            if ($(`.${ClassName.POPOUT}`, 'body').length === 0) {\n                let html = '<div class=\"tui tui-select-popout d-none\">';\n                html += '<div class=\"tui-select-search p-1\">';\n                html += '<input type=\"text\" autocomplete=\"off\" class=\"tui-input\">';\n                html += '</div>';\n                html += '<ul class=\"tui-select-result mb-0\"></ul>';\n                html += '</div>';\n\n                $('body').append(html);\n            }\n            const $popout = $(`.${ClassName.POPOUT}`, 'body');\n            $popout.find('.tui-select-search').removeClass('d-none');\n            if (!this._config.search) {\n                $popout.find('.tui-select-search').addClass('d-none');\n            }\n            return $(`.${ClassName.POPOUT}`, 'body');\n        }\n\n        _drawBackdrop() {\n            if ($(`.${ClassName.BACKDROP}`, 'body').length === 0) {\n                let html = '<div class=\"tui tui-select-backdrop d-none\"></div>';\n                $('body').append(html);\n            }\n            return $(`.${ClassName.BACKDROP}`, 'body');\n        }\n\n        _getConfig(config) {\n            config = {\n                ...Default,\n                ...config\n            };\n            Util.typeCheckConfig(NAME, config, DefaultType);\n            return config;\n        }\n\n        // Static\n\n        static _jQueryInterface(config) {\n            return this.each(function () {\n                let data = $(this).data(DATA_KEY);\n                const _config = {\n                    ...Select3.Default,\n                    ...$(this).data(),\n                    ...typeof config === 'object' && config\n                };\n\n                if (!data) {\n                    data = new Select3(this, _config);\n                    $(this).data(DATA_KEY, data);\n                }\n\n                if (typeof config === 'string') {\n                    if (typeof data[config] === 'undefined') {\n                        throw new TypeError(`No method named \"${config}\"`);\n                    }\n                    data[config]();\n                } else if (_config.toggle) {\n                    data.toggle();\n                }\n            })\n        }\n    }\n\n    /**\n     * ------------------------------------------------------------------------\n     * Data Api implementation\n     * ------------------------------------------------------------------------\n     */\n\n    $(document).ready(function () {\n        $(Selector.DATA_TOGGLE).each(function () {\n            let $target = $(this);\n\n            const config = $target.data(DATA_KEY)\n                ? 'toggle' : {\n                    ...$target.data()\n                };\n\n            Select3._jQueryInterface.call($target, config);\n        });\n    });\n\n    /**\n     * ------------------------------------------------------------------------\n     * jQuery\n     * ------------------------------------------------------------------------\n     */\n\n    $.fn[NAME] = Select3._jQueryInterface;\n    $.fn[NAME].Constructor = Select3;\n    $.fn[NAME].noConflict = function () {\n        $.fn[NAME] = JQUERY_NO_CONFLICT;\n        return Select3._jQueryInterface;\n    };\n\n    return Select3;\n\n})($);\n\nexport default Select3;"]}